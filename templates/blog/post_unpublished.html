{% extends "base.html" %}

{% block title %}{{ page_title }} - My Django Blog{% endblock %}

{% block content %}
<h1>{{ page_title }}</h1>

{% if user.is_staff %}
<p style="color: #666; margin-bottom: 20px;">
    âš™ï¸ <strong>Admin View</strong>: You can see all draft posts from all users.
</p>
{% else %}
<p style="color: #666; margin-bottom: 20px;">
    ğŸ‘‹ You're viewing only your draft posts.
</p>
{% endif %}

<div class="posts-container">
    {% for post in posts %}
    <div class="post-card" style="background: #fff3cd; border-left: 5px solid #ffc107;">
        <!-- Show author (for admin view) -->
        {% if user.is_staff %}
        <div style="color: #856404; font-size: 0.9em; margin-bottom: 10px;">
            ğŸ‘¤ Author: <strong>{{ post.author.username }}</strong>
        </div>
        {% endif %}
        
        <h2 style="color: #856404;">{{ post.title }}</h2>
        <p><strong>Created:</strong> {{ post.published_date|date:"F j, Y" }}</p>
        <p>{{ post.content|truncatewords:30 }}</p>
        
        <div style="margin-top: 15px;">
            <a href="{% url 'post_edit' post.id %}" class="btn btn-warning">
                âœï¸ Edit & Publish
            </a>
            <a href="{% url 'post_detail' post.id %}" class="btn" style="margin-left: 10px;">
                ğŸ‘ï¸ Preview
            </a>
        </div>
    </div>
    {% empty %}
    <div style="text-align: center; padding: 40px; background: #f8f9fa; border-radius: 10px;">
        <h3 style="color: #7f8c8d;">ğŸ“ No draft posts</h3>
        <p>All your posts are published! ğŸ‰</p>
        <a href="{% url 'post_create' %}" class="btn btn-primary" style="margin-top: 20px;">
            âœ¨ Create New Post
        </a>
    </div>
    {% endfor %}
</div>

<div class="navigation" style="margin-top: 30px;">
    <a href="{% url 'post_list' %}" class="btn">â† Back to Published Posts</a>
    <a href="/" class="btn" style="margin-left: 10px;">ğŸ  Home</a>
</div>
{% endblock %}